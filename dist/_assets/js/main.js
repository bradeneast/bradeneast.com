(()=>{class z{constructor({onload:c=null,selector:b,cacheLimit:h,transitioningAttribute:a,preserveScroll:f=!1,preserveAttributes:g=!1}={}){b=b||`a[href^='${window.location.origin}']:not([data-no-schwifty]), a[href^='/']:not([data-no-schwifty])`,h=h||85,a=a||"data-schwifty";let j=g===!0;typeof g!="object"&&(g={documentElement:j,head:j,body:j});let r="schwifty-preload",s='link[rel="stylesheet"]',m=document,t=m.documentElement,v="innerHTML",o=new Map(),N=new IntersectionObserver((d,e)=>d.forEach(u=>{let x=u.isIntersecting,y=u.target.href;if(!x&&x!=void 0)return;o.size>=h&&o.delete(o.keys()[0]),o.get(y)?e.unobserve(u.target):P(y)}),{threshold:.5}),G=(d,e=m)=>e.querySelector(d),w=(d,e=m)=>e.querySelectorAll(d),O=d=>d.target.closest(b)||{},H=()=>w(b).forEach(d=>N.observe(d)),p=(d,e=window)=>e.dispatchEvent(new Event(d)),I=d=>d.replace(/m?s/gi,""),J=()=>{let d=getComputedStyle(t);return(I(d.transitionDelay)+I(d.transitionDuration))*1000},P=d=>{if(!d)return;let e=new XMLHttpRequest();e.onreadystatechange=function(){this.status==200&&o.set(d,e.responseXML)},e.open("GET",d,!0),e.responseType="document",e.send()},K=d=>{let e=o.get(d);if(!e){location=d;return}history.replaceState(null,null,d),w(`${s}:not(.${r})`).forEach(i=>{let k=i.href.replace(location.origin,""),l=G(`${s}.${r}[href="${k}"]`),L=G(`${s}[href="${k}"]`,e);L&&!l&&(i.classList.add(r),t.append(i)),!L&&l&&l.remove()});let u=`${s}:not(.${r})`,x=`${s}.${r}`,y=w(u,e),Q=w(x);for(let i of Q)Array.from(y).some(k=>k.href==i.href)||i.remove();["body","head","documentElement"].forEach(i=>{if(g[i])return;let k=m[i];for(let l of k.attributes)k.removeAttribute(l.name);for(let l of e[i].attributes)k.setAttribute(l.name,l.value)}),t.setAttribute(a,"out"),p("pagehide"),p("unload"),setTimeout(()=>{m.body[v]=e.body[v],m.head[v]=e.head[v],t.setAttribute(a,"in"),p("DOMContentLoaded",m),f||scrollTo(0,0),c&&(c.length?c.map(i=>i()):c()),H(),setTimeout(()=>t.removeAttribute(a),J()),p("load"),p("pageshow")},J())};H(),addEventListener("popstate",()=>K(location.href)),addEventListener("click",d=>{let e=O(d).href;e&&(d.preventDefault(),p("beforeunload"),history.pushState(null,null,location.href),K(e))})}}let q=(c,b=document)=>b.querySelector(c),n=(c,b=document)=>b.querySelectorAll(c),C=(c,b="")=>{let h=document.createElement(c);return h.innerHTML=b,h},F=(c,b)=>b==void 0?JSON.parse(localStorage.getItem(c)):localStorage.setItem(c,JSON.stringify(b)),B=c=>{let b=F(c);document.documentElement.classList.toggle(c,!b),F(c,!b)};function A(c){var f,g;let b=decodeURIComponent(c)||"",h=b.split("/").pop(),a=(g=(f=h==null?void 0:h.split("."))==null?void 0:f.shift())==null?void 0:g.replace(/-|\+/g," ");return a||""}function M(c){let b=new XMLHttpRequest();b.onreadystatechange=function(){this.status==200&&b.responseXML&&c(b.responseXML)},b.responseType="document",b.open("GET","/sitemap.xml",!0),b.send()}function D(c){return M(b=>{b||(window.location="/random");let h=Array.from(n("loc",b)),a=h.map(j=>j.textContent.trim()),f=a.filter(j=>c.test(j)),g=Math.round((f.length-1)*Math.random());if(f[g])window.location=f[g];else return!1})}function E(){var h;document.body.classList.remove("reduced-motion");for(let a of["dark_mode","muted"]){let f=q(`#${a}_toggle`);f&&f.addEventListener("click",()=>B(a))}let c=new IntersectionObserver(a=>a.map(f=>f.target.classList.toggle("paused",!f.isIntersecting)),{threshold:.63});for(let a of n(".animation"))c.observe(a);let b=document.querySelectorAll(".split");for(let a of b){let f=a.textContent.split("").map((g,j)=>`<span class="character" style="--index:${j}">\r
							${g==" "?"&nbsp;":g}\r
						</span>`);a.innerHTML=f.join("")}for(let a of n("img"))((h=a.alt)==null?void 0:h.length)||(a.alt=a.alt||A(a.src)),a.parentElement.classList.add("has-img"),a.parentElement.title=a.title;if(q(".codepen")){let a=C("script");a.src="https://static.codepen.io/assets/embed/ei.js",a.async=!0,document.body.append(a)}for(let a of n(".embedded_project")){let f=q("button",a),g=q("iframe",a);f.addEventListener("click",()=>{g.src=g.getAttribute("data-src"),a.classList.add("loaded")})}for(let a of n('a[href*="/random"]'))a.addEventListener("click",f=>{f.preventDefault(),D(/\/blog\/.+/i)})}E();try{new z({preserveAttributes:!0,onload:E})}catch(c){console.log(c)}})();
