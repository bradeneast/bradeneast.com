(()=>{class z{constructor({onload:b,selector:e=`a[href^='${window.location.origin}']:not([data-no-schwifty]), a[href^='/']:not([data-no-schwifty])`,cacheLimit:a=85,preserveScroll:f=!1,transitioningAttribute:g="data-schwifty",preserveAttributes:i}={}){let m=i===!0;typeof i!="object"&&(i={documentElement:m,head:m,body:m});let r="schwifty-preload",s='link[rel="stylesheet"]',n=document,t=n.documentElement,v="innerHTML",o=new Map(),N=new IntersectionObserver((c,d)=>c.forEach(u=>{let x=u.isIntersecting,y=u.target.href;if(!x&&x!=void 0)return;o.size>=a&&o.delete(o.keys()[0]),o.get(y)?d.unobserve(u.target):P(y)}),{threshold:.5}),H=(c,d=n)=>d.querySelector(c),w=(c,d=n)=>d.querySelectorAll(c),O=c=>c.target.closest(e)||{},I=()=>w(e).forEach(c=>N.observe(c)),p=(c,d=window)=>d.dispatchEvent(new Event(c)),J=c=>c.replace(/m?s/gi,""),K=()=>{let c=getComputedStyle(t);return(J(c.transitionDelay)+J(c.transitionDuration))*1e3},P=c=>{if(!c)return;let d=new XMLHttpRequest();d.onreadystatechange=function(){this.status==200&&o.set(c,d.responseXML)},d.open("GET",c,!0),d.responseType="document",d.send()},L=c=>{let d=o.get(c);if(!d){location=c;return}history.replaceState(null,null,c),w(`${s}:not(.${r})`).forEach(h=>{let k=h.href.replace(location.origin,""),l=H(`${s}.${r}[href="${k}"]`),M=H(`${s}[href="${k}"]`,d);M&&!l&&(h.classList.add(r),t.append(h)),!M&&l&&l.remove()});let u=`${s}:not(.${r})`,x=`${s}.${r}`,y=w(u,d),Q=w(x);for(let h of Q)Array.from(y).some(k=>k.href==h.href)||h.remove();["body","head","documentElement"].forEach(h=>{if(i[h])return;let k=n[h];for(let l of k.attributes)k.removeAttribute(l.name);for(let l of d[h].attributes)k.setAttribute(l.name,l.value)}),t.setAttribute(g,"out"),p("pagehide"),p("unload"),setTimeout(()=>{n.body[v]=d.body[v],n.head[v]=d.head[v],t.setAttribute(g,"in"),p("DOMContentLoaded",n),f||scrollTo(0,0),b&&(b.length?b.map(h=>h()):b()),I(),setTimeout(()=>t.removeAttribute(g),K()),p("load"),p("pageshow")},K())};I(),addEventListener("popstate",c=>{L(location.href)}),addEventListener("click",c=>{let d=O(c).href;d&&(c.preventDefault(),p("beforeunload"),history.pushState(null,null,location.href),L(d))})}}let q=(b,e=document)=>e.querySelector(b),j=(b,e=document)=>e.querySelectorAll(b),C=(b,e="")=>{let a=document.createElement(b);return a.innerHTML=e,a},G=(b,e)=>e==void 0?JSON.parse(localStorage.getItem(b)):localStorage.setItem(b,JSON.stringify(e)),B=b=>{let e=G(b);document.documentElement.classList.toggle(b,!e),G(b,!e)};function A(b=""){var g,i;let e=decodeURIComponent(b)||"",a=e.split("/").pop(),f=(i=(g=a==null?void 0:a.split("."))==null?void 0:g.shift())==null?void 0:i.replace(/-|\+/g," ");return f||""}function F(){return fetch("/sitemap.xml").then(b=>b.text()).then(b=>new DOMParser().parseFromString(b,"text/xml"))}function D(){let b=[],e=["/blog/.+"];setTimeout(()=>j(".hidden").forEach(a=>a.classList.remove("hidden")),1e3),F().then(a=>{for(let m of j("loc",a))b.push(m.textContent.trim());let f=new RegExp(`(${e.join(")|(")})`),g=b.filter(m=>f.test(m)),i=Math.round((g.length-1)*Math.random());g[i]&&(window.location=g[i])})}function E(){var e;document.body.classList.remove("reduced-motion");for(let a of j('a[href*="/random"]'))a.addEventListener("click",f=>{f.preventDefault(),D()});for(let a of["dark_mode","muted"]){let f=q(`#${a}_toggle`);f&&f.addEventListener("click",()=>B(a))}let b=new IntersectionObserver(a=>a.map(f=>f.target.classList.toggle("paused",!f.isIntersecting)),{threshold:.63});for(let a of j(".animation"))b.observe(a);for(let a of j("img"))((e=a.alt)==null?void 0:e.length)||(a.alt=a.alt||A(a.src)),a.parentElement.classList.add("has-img"),a.parentElement.title=a.title;if(q(".codepen")){let a=C("script");a.src="https://static.codepen.io/assets/embed/ei.js",a.async=!0,document.body.append(a)}for(let a of j(".embedded_project")){let f=q("button",a),g=q("iframe",a);f.addEventListener("click",()=>{g.src=g.getAttribute("data-src"),a.classList.add("loaded")})}}E();try{new z({preserveAttributes:!0,onload:E})}catch(b){console.log(b)}})();
