(()=>{class z{constructor({onload:c=null,selector:b,cacheLimit:a,transitioningAttribute:f,preserveScroll:h=!1,preserveAttributes:i=!1}={}){b=b||`a[href^='${window.location.origin}']:not([data-no-schwifty]), a[href^='/']:not([data-no-schwifty])`,a=a||85,f=f||"data-schwifty";let l=i===!0;typeof i!="object"&&(i={documentElement:l,head:l,body:l});let r="schwifty-preload",s='link[rel="stylesheet"]',m=document,t=m.documentElement,v="innerHTML",o=new Map(),N=new IntersectionObserver((d,e)=>d.forEach(u=>{let x=u.isIntersecting,y=u.target.href;if(!x&&x!=void 0)return;o.size>=a&&o.delete(o.keys()[0]),o.get(y)?e.unobserve(u.target):P(y)}),{threshold:.5}),G=(d,e=m)=>e.querySelector(d),w=(d,e=m)=>e.querySelectorAll(d),O=d=>d.target.closest(b)||{},H=()=>w(b).forEach(d=>N.observe(d)),p=(d,e=window)=>e.dispatchEvent(new Event(d)),I=d=>d.replace(/m?s/gi,""),J=()=>{let d=getComputedStyle(t);return(I(d.transitionDelay)+I(d.transitionDuration))*1000},P=d=>{if(!d)return;let e=new XMLHttpRequest();e.onreadystatechange=function(){this.status==200&&o.set(d,e.responseXML)},e.open("GET",d,!0),e.responseType="document",e.send()},K=d=>{let e=o.get(d);if(!e){location=d;return}history.replaceState(null,null,d),w(`${s}:not(.${r})`).forEach(g=>{let j=g.href.replace(location.origin,""),k=G(`${s}.${r}[href="${j}"]`),L=G(`${s}[href="${j}"]`,e);L&&!k&&(g.classList.add(r),t.append(g)),!L&&k&&k.remove()});let u=`${s}:not(.${r})`,x=`${s}.${r}`,y=w(u,e),Q=w(x);for(let g of Q)Array.from(y).some(j=>j.href==g.href)||g.remove();["body","head","documentElement"].forEach(g=>{if(i[g])return;let j=m[g];for(let k of j.attributes)j.removeAttribute(k.name);for(let k of e[g].attributes)j.setAttribute(k.name,k.value)}),t.setAttribute(f,"out"),p("pagehide"),p("unload"),setTimeout(()=>{m.body[v]=e.body[v],m.head[v]=e.head[v],t.setAttribute(f,"in"),p("DOMContentLoaded",m),h||scrollTo(0,0),c&&(c.length?c.map(g=>g()):c()),H(),setTimeout(()=>t.removeAttribute(f),J()),p("load"),p("pageshow")},J())};H(),addEventListener("popstate",()=>K(location.href)),addEventListener("click",d=>{let e=O(d).href;e&&(d.preventDefault(),p("beforeunload"),history.pushState(null,null,location.href),K(e))})}}let q=(c,b=document)=>b.querySelector(c),n=(c,b=document)=>b.querySelectorAll(c),C=(c,b="")=>{let a=document.createElement(c);return a.innerHTML=b,a},F=(c,b)=>b==void 0?JSON.parse(localStorage.getItem(c)):localStorage.setItem(c,JSON.stringify(b)),B=c=>{let b=F(c);document.documentElement.classList.toggle(c,!b),F(c,!b)};function A(c){var h,i;let b=decodeURIComponent(c)||"",a=b.split("/").pop(),f=(i=(h=a==null?void 0:a.split("."))==null?void 0:h.shift())==null?void 0:i.replace(/-|\+/g," ");return f||""}function M(c){let b=new XMLHttpRequest();b.onreadystatechange=function(){if(this.status==200&&b.responseXML)return c(b.responseXML)},b.responseType="document",b.open("GET","/sitemap.xml",!0),b.send()}function D(c){return M(b=>{b.querySelector("parsererror")&&(window.location="/random");let a=Array.from(n("loc",b)),f=a.map(l=>l.textContent.trim()),h=f.filter(l=>c.test(l)),i=Math.round((h.length-1)*Math.random());if(h[i])window.location=h[i];else return!1})}function E(){var b;document.body.classList.remove("reduced-motion");for(let a of["dark_mode","muted"]){let f=q(`#${a}_toggle`);f&&f.addEventListener("click",()=>B(a))}let c=new IntersectionObserver(a=>a.map(f=>f.target.classList.toggle("paused",!f.isIntersecting)),{threshold:.63});for(let a of n(".animation"))c.observe(a);for(let a of n("img"))((b=a.alt)==null?void 0:b.length)||(a.alt=a.alt||A(a.src)),a.parentElement.classList.add("has-img"),a.parentElement.title=a.title;if(q(".codepen")){let a=C("script");a.src="https://static.codepen.io/assets/embed/ei.js",a.async=!0,document.body.append(a)}for(let a of n(".embedded_project")){let f=q("button",a),h=q("iframe",a);f.addEventListener("click",()=>{h.src=h.getAttribute("data-src"),a.classList.add("loaded")})}for(let a of n('a[href*="/random"]'))a.addEventListener("click",f=>{f.preventDefault(),D(/\/blog\/.+/i)})}E();try{new z({preserveAttributes:!0,onload:E})}catch(c){console.log(c)}})();
