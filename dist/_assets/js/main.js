(()=>{class z{constructor({onload:c=null,selector:b,cacheLimit:g,transitioningAttribute:a,preserveScroll:f=!1,preserveAttributes:h=!1}={}){b=b||`a[href^='${window.location.origin}']:not([data-no-schwifty]), a[href^='/']:not([data-no-schwifty])`,g=g||85,a=a||"data-schwifty";let j=h===!0;typeof h!="object"&&(h={documentElement:j,head:j,body:j});let q="schwifty-preload",r='link[rel="stylesheet"]',m=document,s=m.documentElement,u="innerHTML",o=new Map(),N=new IntersectionObserver((d,e)=>d.forEach(t=>{let w=t.isIntersecting,x=t.target.href;if(!w&&w!=void 0)return;o.size>=g&&o.delete(o.keys()[0]),o.get(x)?e.unobserve(t.target):P(x)}),{threshold:.5}),G=(d,e=m)=>e.querySelector(d),v=(d,e=m)=>e.querySelectorAll(d),O=d=>d.target.closest(b)||{},H=()=>v(b).forEach(d=>N.observe(d)),p=(d,e=window)=>e.dispatchEvent(new Event(d)),I=d=>d.replace(/m?s/gi,""),J=()=>{let d=getComputedStyle(s);return(I(d.transitionDelay)+I(d.transitionDuration))*1000},P=d=>{if(!d)return;let e=new XMLHttpRequest();e.onreadystatechange=function(){this.status==200&&o.set(d,e.responseXML)},e.open("GET",d,!0),e.responseType="document",e.send()},K=d=>{let e=o.get(d);if(!e){location=d;return}history.replaceState(null,null,d),v(`${r}:not(.${q})`).forEach(i=>{let k=i.href.replace(location.origin,""),l=G(`${r}.${q}[href="${k}"]`),L=G(`${r}[href="${k}"]`,e);L&&!l&&(i.classList.add(q),s.append(i)),!L&&l&&l.remove()});let t=`${r}:not(.${q})`,w=`${r}.${q}`,x=v(t,e),Q=v(w);for(let i of Q)Array.from(x).some(k=>k.href==i.href)||i.remove();["body","head","documentElement"].forEach(i=>{if(h[i])return;let k=m[i];for(let l of k.attributes)k.removeAttribute(l.name);for(let l of e[i].attributes)k.setAttribute(l.name,l.value)}),s.setAttribute(a,"out"),p("pagehide"),p("unload"),setTimeout(()=>{m.body[u]=e.body[u],m.head[u]=e.head[u],s.setAttribute(a,"in"),p("DOMContentLoaded",m),f||scrollTo(0,0),c&&(c.length?c.map(i=>i()):c()),H(),setTimeout(()=>s.removeAttribute(a),J()),p("load"),p("pageshow")},J())};H(),addEventListener("popstate",()=>K(location.href)),addEventListener("click",d=>{let e=O(d).href;e&&(d.preventDefault(),p("beforeunload"),history.pushState(null,null,location.href),K(e))})}}let y=(c,b=document)=>b.querySelector(c),n=(c,b=document)=>b.querySelectorAll(c),C=(c,b="")=>{let g=document.createElement(c);return g.innerHTML=b,g},F=(c,b)=>b==void 0?JSON.parse(localStorage.getItem(c)):localStorage.setItem(c,JSON.stringify(b)),B=c=>{let b=F(c);document.documentElement.classList.toggle(c,!b),F(c,!b)};function A(c){var f,h;let b=decodeURIComponent(c)||"",g=b.split("/").pop(),a=(h=(f=g==null?void 0:g.split("."))==null?void 0:f.shift())==null?void 0:h.replace(/-|\+/g," ");return a||""}function M(c){let b=new XMLHttpRequest();b.onreadystatechange=function(){this.status==200&&b.responseXML&&c(b.responseXML)},b.responseType="document",b.open("GET","/sitemap.xml",!0),b.send()}function D(c){return M(b=>{b||(window.location="/random");let g=Array.from(n("loc",b)),a=g.map(j=>j.textContent.trim()),f=a.filter(j=>c.test(j)),h=Math.round((f.length-1)*Math.random());if(f[h])window.location=f[h];else return!1})}function E(){var g;document.body.classList.remove("reduced-motion");for(let a of n(".paused"))a.classList.remove("paused");for(let a of["dark_mode","muted"]){let f=y(`#${a}_toggle`);f&&f.addEventListener("click",()=>B(a))}let c=new IntersectionObserver(a=>a.map(f=>f.target.classList.toggle("paused",!f.isIntersecting)),{threshold:.63});for(let a of n(".animation"))c.observe(a);let b=document.querySelectorAll(".split");for(let a of b){let f=a.textContent.split("").map((h,j)=>`<span class="character" style="--index:${j}">${h==" "?"&nbsp;":h}</span>`);a.innerHTML=f.join("")}for(let a of n("img"))((g=a.alt)==null?void 0:g.length)||(a.alt=a.alt||A(a.src)),a.parentElement.classList.add("has-img"),a.parentElement.title=a.title;if(y(".codepen")){let a=C("script");a.src="https://static.codepen.io/assets/embed/ei.js",a.async=!0,document.body.append(a)}for(let a of n('a[href*="/random"]'))a.addEventListener("click",f=>{f.preventDefault(),D(/\/blog\/.+/i)})}E();try{new z({preserveAttributes:!0,onload:E})}catch(c){console.log(c)}})();
