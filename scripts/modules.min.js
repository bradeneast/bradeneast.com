function checkActiveLinks(){document.querySelectorAll('.nav-item').forEach(t=>{let e=t.textContent,o=window.location.href.toLowerCase();e&&toggleClass(t,'active',o.includes(e.toLowerCase()))})}function toggleDarkMode(){const t=localStorage.getItem('darkModeOn'),e=document.getElementById('favicon');let o;t&&(o=JSON.parse(t)),o?(o=!1,e.setAttribute('href',e.href.replace('dark','light'))):(o=!0,e.setAttribute('href',e.href.replace('light','dark'))),localStorage.setItem('darkModeOn',o),toggleClass(document.documentElement,'dm')}function altFromSource(t){let e=t.getAttribute('src');if(e){let t=decodeURIComponent(e).split('/').pop();return t?t.split('.').shift().replace(/-|\+/g,' '):null}}function clearImageFormatting(){const t='style, width, height, max-width, max-height'.split(', ');document.querySelectorAll('img').forEach(e=>{t.map(t=>e.removeAttribute(t)),!e.getAttribute('alt')&&e.setAttribute('alt',altFromSource(e)),e.setAttribute('loading','lazy')})}function dynamicSort(t){let e=1;return'-'===t[0]&&(e=-1,t=t.substr(1)),function(o,n){return(o[t]<n[t]?-1:o[t]>n[t]?1:0)*e}}function toggleClass(t,e,o){return void 0===o?t.classList.toggle(e):t.classList.toggle(e,o),t}function staggerAnimations(t){let e,o,n=t.parent,r=n.getBoundingClientRect(),a={x:r.right-r.width/2,y:r.bottom-r.height/2},i=Array.from(n.children),l=[],c=.5*t.intensity,s=t.origin.split(' ')||['top','left'];s[1]||s.push('center'),'left'!=s[0]&&'right'!=s[0]||s.reverse(),s.map((t,n)=>{'center'!=t?0==n?o=r[t]:e=r[t]:0==n?o=a.y:e=a.x}),i.map(t=>{let n=t.getBoundingClientRect(),r=n.right-n.width/2,a=n.bottom-n.height/2,i=Math.max(e,r)-Math.min(e,r),c=Math.max(o,a)-Math.min(o,a),s=Math.hypot(i,c);t.distance=Math.round(s),l.push(t)}),l.sort(dynamicSort('distance')),'to'==t.direction&&l.reverse(),l.map((t,e)=>t.style.animationDelay=e*c+'s')}function startTouchListeners(){let t,e;window.addEventListener('touchstart',function(e){t=parseInt(e.changedTouches[0].clientX)}),window.addEventListener('touchend',function(o){e=t-o.changedTouches[0].clientX,'darkModeToggle'==o.target.id&&(JSON.parse(localStorage.getItem('darkModeOn'))?e>toggleThreshold&&toggleDarkMode():e<-1*toggleThreshold&&toggleDarkMode())})}function copyBoilerPlateForMobile(){const t=document.querySelector('.nav-end').cloneNode(!0),e=document.createElement('section');e.appendChild(t),main.insertAdjacentElement('afterend',e)}const toggles=Array.from(document.getElementsByClassName('toggle')),toggleThreshold=20,main=document.getElementById('main'),allImages=Array.from(document.getElementsByTagName('img'));checkActiveLinks(),copyBoilerPlateForMobile(),startTouchListeners(),document.querySelectorAll('[data-stagger]').forEach(t=>{staggerAnimations({parent:t,intensity:.2,direction:'from',origin:'top'})}),allImages.map(t=>{clearImageFormatting(t),altFromSource(t)});