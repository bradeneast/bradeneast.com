<!DOCTYPE html>
<html lang="en">

<head>
    <noscript>
        <h1>I&apos;m a minimalist at heart, but I do have to run some lightweight Javascript to keep this website manageable! Please enable it for a better experience :)</h1>
        <link rel="stylesheet" href="/css/main.css">
        <link rel="stylesheet" href="/css/prism.css">
    </noscript>
    <script type="text/javascript" src="/scripts/insertheader.js"></script>
</head>

<body>

    <section class="section post" style="padding-top: 30vh;">
        <h1 class="title">A quick way to improve SEO and accessibility - get alt attributes from image src with vanilla javascript</h1>
        <div class="content">
            <span class="meta">
                <h4 class="date">2019/08/19</h4>
                <h2 class="tags"><a href="/blog/tags/javascript">javascript</a>, <a href="/blog/tags/html">html</a></h2>
            </span>
            <div class="main">
                <div class="body">
<p>I&#x2019;m sometimes lazy when it comes to accessibility on web projects. No matter how hard I try, I&#x2019;m always adding <code>aria-label</code> and <code>tabindex</code> and <code>role</code> attributes an afterthought.</p>
<p>The repetition is also frustrating. If you&#x2019;re anything like me, you enjoy writing code because it helps you avoid repeating the same tasks over and over.</p>
<p><img src="/images/blog/over-and-over.gif" alt="over and over gif"></p>
<p>That said, some things are just too important to skip, namely image <code>alt</code> attributes. When I discovered <a href="https://moz.com/learn/seo/alt-text">why alt is so important</a>, I was annoyed at yet another detail to manage for better SEO and accessibility.</p>
<p>Today, let&#x2019;s look at how to solve that problem by adding accessible <code>alt</code> attribute values to our <code>img</code> elements with vanilla javascript.</p>
<p>Check out the example HTML below.</p>
<pre><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>gallery<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>gallery__item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>https://hips.hearstapps.com/hmg-prod.s3.amazonaws.com/images/wboc-2-media-approved-preview-1521054875.jpeg?crop=1.00xw:0.870xh;0,0.130xh&amp;resize=1080:*<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>gallery__item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>https://media-cdn.tripadvisor.com/media/photo-s/09/3a/1b/8a/sesame-chicken-yum.jpg<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>gallery__item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>https://4.bp.blogspot.com/-ehuFRO8kWgM/V3yvBqhyLvI/AAAAAAAAwQY/-eaVSQkLFs8ioHS53M_Hjxj7DJuj-pWFQCLcB/w1200-h630-p-k-no-nu/pei-wei-summer-salads.jpg<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<p>We have a delicious-looking gallery of asian-american food here. You probably had some difficulty figuring that out though, because the actual image titles come after a long, nonsensical string of characters that cdn&#x2019;s can read, but we can&#x2019;t.</p>
<p>We want to isolate just the image titles. To help us do that, we&#x2019;ll use some fun native javascript methods that honestly sound like dance moves: <code>split()</code>, <code>shift()</code>, and <code>pop()</code>.</p>
<p>First, let&#x2019;s grab the <code>img</code> elements with a <code>querySelectorAll()</code>.</p>
<pre><code class="language-javascript"><span class="token keyword">const</span> images <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&apos;img&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

images<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">image</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// do stuff</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>Since <code>querySelectorAll()</code> returns a node list and not an array, we should use <code>forEach()</code> to loop over it.</p>
<p>Next, let&#x2019;s make sure the image doesn&#x2019;t already have an <code>alt</code> value already set.</p>
<pre><code class="language-javascript">images<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">image</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>image<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&apos;alt&apos;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// do stuff</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>After that, we can get the <code>src</code> value, and convert URL-formatted characters with <code>decodeURIComponent()</code>. This will replace an encoded character like <code>%20</code> with a standard space.</p>
<pre><code class="language-javascript">images<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">image</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>image<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&apos;alt&apos;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> imageSource <span class="token operator">=</span> <span class="token function">decodeURIComponent</span><span class="token punctuation">(</span>image<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&apos;src&apos;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>From here, we can isolate the title by splitting the URL into chunks between forward slashes and returning the last one of those chunks.</p>
<pre><code class="language-javascript">images<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">image</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>image<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&apos;alt&apos;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> imageSource <span class="token operator">=</span> <span class="token function">decodeURIComponent</span><span class="token punctuation">(</span>image<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&apos;src&apos;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> imageName <span class="token operator">=</span> imageSource<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&apos;/&apos;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>Finally, we&#x2019;ll remove the file extension (.jpg, .png, etc.) and everything after it. Then we&#x2019;ll just replace dashes with spaces, and we&#x2019;re done!</p>
<pre><code class="language-javascript"><span class="token keyword">const</span> images <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&apos;img&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

images<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">image</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// will ignore images with alt already set</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>image<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&apos;alt&apos;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">const</span> imageSource <span class="token operator">=</span> <span class="token function">decodeURIComponent</span><span class="token punctuation">(</span>image<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&apos;src&apos;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> imageName <span class="token operator">=</span> imageSource<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&apos;/&apos;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &apos;my-beautiful-image.jpg?format=small&apos;</span>
        <span class="token keyword">const</span> imageTitle <span class="token operator">=</span> imageName<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&apos;.&apos;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/-/g</span><span class="token punctuation">,</span> <span class="token string">&apos; &apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &apos;my beautiful image&apos;</span>

        image<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&apos;alt&apos;</span><span class="token punctuation">,</span> imageTitle<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>I hope this little snippet of vanilla javascript takes a little bit of the headache out of improving SEO and accessibility on your web projects.</p>
<p>As always, you can check out the <a href="https://codepen.io/bradeneast/pen/ZEzpLNg">demo on CodePen</a>, or copy the condensed version without comments below:</p>
<pre><code class="language-javascript">document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&apos;img&apos;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>e<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&apos;alt&apos;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> source <span class="token operator">=</span> <span class="token function">decodeURIComponent</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&apos;src&apos;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> title <span class="token operator">=</span> <span class="token punctuation">(</span>source<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&apos;/&apos;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&apos;.&apos;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/-/g</span><span class="token punctuation">,</span> <span class="token string">&apos; &apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        e<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&apos;alt&apos;</span><span class="token punctuation">,</span> title<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<span class="post-cta"><p>Thanks for reading! If you learned something useful, <a target="_blank" href="https://twitter.com/share?text=A%20quick%20way%20to%20improve%20seo%20and%20accessibility: get%20alt%20attributes%20from%20image%20src%20with%20vanilla%20javascript%20by%20@bradenthehair%20-%20&amp;url=https://bradeneast.com/blog/a-quick-way-to-improve-seo-and-accessibility--get-alt-attributes-from-image-src-with-vanilla-javascript">share this article</a> with your followers. I appreciate it!</p></span></div>
            </div>
        </div>
    </section>

    <section class="section post-nav">
        <a href="/blog/styling-pseudo-elements-with-vanilla-javascript--the-easy-way" id="previous-post">
            <div class="link-title">
                <div class="label">previous</div>
                <svg viewbox="0 0 9 18">
                    <polyline stroke="currentColor" stroke-width="1.7" fill="none" points="8,1 0,9 8,17">
                </polyline></svg>
            Styling pseudo elements with vanilla javascript - the easy way</div>
        </a>
        <a href="/blog/converting-json-to-html--nested-objects-and-urls" id="next-post">
            <div class="link-title">
                <div class="label">next</div>
                <svg viewbox="0 0 9 18">
                    <polyline stroke="currentColor" stroke-width="1.7" fill="none" points="1,1 9,9 1,17">
                </polyline></svg>
            Converting JSON to HTML - Nested objects and URLs</div>
        </a>
    </section>
    <section class="rss-subscribe">
        <h2>Get notified via RSS when I post a new article.</h2>
        <!-- Begin Mailchimp Signup Form -->
        <div id="mc_embed_signup">
            <form action="https://gmail.us3.list-manage.com/subscribe/post?u=1c103417f1b53af926251412e&amp;id=501e8bc2f2" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
                <div class="email-signup" id="mc_embed_signup_scroll">
                    <div class="mc-field-group">
                        <input type="email" value placeholder="your email address..." name="EMAIL" class="required email" id="mce-EMAIL">
                    </div>
                    <div id="mce-responses" class="clear">
                        <div class="response" id="mce-error-response" style="display:none"></div>
                        <div class="response" id="mce-success-response" style="display:none"></div>
                    </div> <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
                    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_1c103417f1b53af926251412e_501e8bc2f2" tabindex="-1" value></div>
                    <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button">
                </div>
            </form>
        </div>
        <!--End mc_embed_signup-->
    </section>
    <script type="text/javascript" src="/scripts/insertfooter.js"></script>

</body>

</html>