!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("void-elements")):"function"==typeof define&&define.amd?define(["void-elements"],t):(e=e||self).htmlParseStringify=t(e.voidElements)}(this,function(e){e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e;var t=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function n(n){var r={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},i=n.match(/<\/?([^\s]+?)[/\s>]/);if(i&&(r.name=i[1],(e[i[1].toLowerCase()]||"/"===n.charAt(n.length-2))&&(r.voidElement=!0),r.name.startsWith("!--"))){var s=n.indexOf("--\x3e");return{type:"comment",comment:-1!==s?n.slice(4,s):""}}for(var o=new RegExp(t),c=null;null!==(c=o.exec(n));)if(c[0].trim())if(c[1]){var a=c[1].trim(),u=[a,""];a.indexOf("=")>-1&&(u=a.split("=")),r.attrs[u[0]]=u[1],o.lastIndex--}else c[2]&&(r.attrs[c[2]]=c[3].trim().substring(1,c[3].length-1));return r}var r=/<[a-zA-Z\-\!\/](?:"[^"]*"['"]*|'[^']*'['"]*|[^'">])*>/g,i=Object.create(null);function s(e,t){switch(t.type){case"text":return e+t.content;case"tag":return e+="<"+t.name+(t.attrs?function(e){var t=[];for(var n in e)t.push(n+'="'+e[n]+'"');return t.length?" "+t.join(" "):""}(t.attrs):"")+(t.voidElement?"/>":">"),t.voidElement?e:e+t.children.reduce(s,"")+"</"+t.name+">";case"comment":return e+"\x3c!--"+t.comment+"--\x3e"}}return{parse:function(e,t){t||(t={}),t.components||(t.components=i);var s,o=[],c=[],a=-1,u=!1;if(0!==e.indexOf("<")){var l=e.indexOf("<");o.push({type:"text",content:-1===l?e:e.substring(0,l)})}return e.replace(r,function(r,i){if(u){if(r!=="</"+s.name+">")return;u=!1}var l,f="/"!==r.charAt(1),m=r.startsWith("\x3c!--"),d=i+r.length,p=e.charAt(d);if(m){var h=n(r);return a<0?(o.push(h),o):((l=c[a]).children.push(h),o)}if(f&&(a++,"tag"===(s=n(r)).type&&t.components[s.name]&&(s.type="component",u=!0),s.voidElement||u||!p||"<"===p||s.children.push({type:"text",content:e.slice(d,e.indexOf("<",d))}),0===a&&o.push(s),(l=c[a-1])&&l.children.push(s),c[a]=s),(!f||s.voidElement)&&(a>-1&&(s.voidElement||s.name===r.slice(2,-1))&&a--,!u&&"<"!==p&&p)){l=-1===a?o:c[a].children;var v=e.indexOf("<",d),x=e.slice(d,-1===v?void 0:v);/^\s*$/.test(x)||l.push({type:"text",content:x})}}),o},stringify:function(e){return e.reduce(function(e,t){return e+s("",t)},"")}}});
//# sourceMappingURL=html-parse-stringify.umd.js.map
