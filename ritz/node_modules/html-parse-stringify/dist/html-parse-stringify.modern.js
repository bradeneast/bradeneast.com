import t from"void-elements";const e=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function n(n){const s={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},r=n.match(/<\/?([^\s]+?)[/\s>]/);if(r&&(s.name=r[1],(t[r[1].toLowerCase()]||"/"===n.charAt(n.length-2))&&(s.voidElement=!0),s.name.startsWith("!--"))){const t=n.indexOf("--\x3e");return{type:"comment",comment:-1!==t?n.slice(4,t):""}}const c=new RegExp(e);let i=null;for(;i=c.exec(n),null!==i;)if(i[0].trim())if(i[1]){const t=i[1].trim();let e=[t,""];t.indexOf("=")>-1&&(e=t.split("=")),s.attrs[e[0]]=e[1],c.lastIndex--}else i[2]&&(s.attrs[i[2]]=i[3].trim().substring(1,i[3].length-1));return s}const s=/<[a-zA-Z\-\!\/](?:"[^"]*"['"]*|'[^']*'['"]*|[^'">])*>/g,r=Object.create(null);function c(t,e){switch(e.type){case"text":return t+e.content;case"tag":return t+="<"+e.name+(e.attrs?function(t){const e=[];for(let n in t)e.push(n+'="'+t[n]+'"');return e.length?" "+e.join(" "):""}(e.attrs):"")+(e.voidElement?"/>":">"),e.voidElement?t:t+e.children.reduce(c,"")+"</"+e.name+">";case"comment":return t+"\x3c!--"+e.comment+"--\x3e"}}var i={parse:function(t,e){e||(e={}),e.components||(e.components=r);const c=[],i=[];let o,l=-1,a=!1;if(0!==t.indexOf("<")){var m=t.indexOf("<");c.push({type:"text",content:-1===m?t:t.substring(0,m)})}return t.replace(s,function(s,r){if(a){if(s!=="</"+o.name+">")return;a=!1}const m="/"!==s.charAt(1),u=s.startsWith("\x3c!--"),f=r+s.length,p=t.charAt(f);let d;if(u){const t=n(s);return l<0?(c.push(t),c):(d=i[l],d.children.push(t),c)}if(m&&(l++,o=n(s),"tag"===o.type&&e.components[o.name]&&(o.type="component",a=!0),o.voidElement||a||!p||"<"===p||o.children.push({type:"text",content:t.slice(f,t.indexOf("<",f))}),0===l&&c.push(o),d=i[l-1],d&&d.children.push(o),i[l]=o),(!m||o.voidElement)&&(l>-1&&(o.voidElement||o.name===s.slice(2,-1))&&l--,!a&&"<"!==p&&p)){d=-1===l?c:i[l].children;const e=t.indexOf("<",f),n=t.slice(f,-1===e?void 0:e);/^\s*$/.test(n)||d.push({type:"text",content:n})}}),c},stringify:function(t){return t.reduce(function(t,e){return t+c("",e)},"")}};export default i;
//# sourceMappingURL=html-parse-stringify.modern.js.map
