@keyframes animateIn {
	to {
		transform: translate3d(0, 0, 0) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1);
		opacity: 1;
	}
}

@keyframes slideIn {
	from {
		clip-path: polygon(100% 0, 100% 0, 100% 100%, 100% 100%);
		transform: translate3d(1em, 0, 0);
	}
}

.splitting {
	&[style*="break-word"] .word {
		flex-flow: row wrap;
	}

	.word {
		display: inline-flex;
	}

	.char {
		display: inline-block;
		clip-path: polygon(-15% -15%, 115% -15%, 115% 125%, -15% 125%);
		animation: slideIn $smoothTransition both;
		animation-delay: calc(0.3s + var(--char-index) * 20ms);
	}
}

html {
	main {
		transition: opacity $smoothTransition;
	}

	&[data-schwifty="in"] {
		transition-duration: 0.1s;
	}

	&[data-schwifty] {
		main {
			opacity: 0;
		}
	}
}

p,
h1,
h2,
h3,
h4,
h5,
h6 {
	[data-tooltip] {
		display: inline-block;
	}
}

[data-tooltip] {
	position: relative;
	color: var(--primary);
	font-family: $ff_alt;
	$space: 0.63em;

	&:hover,
	&:focus {
		&::before {
			opacity: 1;
			transform: translate(50%, 0);
		}
	}

	&::before,
	&::after {
		letter-spacing: 0;
		text-align: center;
		line-height: 1.2;
	}

	&::after {
		color: var(--g4);
		content: "*";
	}

	&::before {
		content: attr(data-tooltip);
		position: absolute;
		color: var(--g0);
		background: var(--g7);
		font-size: 0.85rem;
		width: 10em;
		right: 0.4em;
		bottom: 100%;
		padding: $space;
		padding-bottom: $space * 2;
		pointer-events: none;
		opacity: 0;
		transform: translate(50%, 1em);
		transition: opacity $smoothTransition, transform $smoothTransition;
		--pt: calc(100% - #{$space});
		clip-path: polygon(
			0 0,
			100% 0,
			100% var(--pt),
			calc(50% + #{$space}) var(--pt),
			50% 100%,
			calc(50% - #{$space}) var(--pt),
			0 var(--pt)
		);
	}
}

@supports (mix-blend-mode: overlay) {
	@media screen and (min-width: $mobile) {
		body {
			&::after {
				content: "";
				display: block;
				position: fixed;
				width: 100%;
				height: 100%;
				top: 0;
				left: 0;
				pointer-events: none;
				z-index: 9;
				background: url(/img/noise.jpg);
				background-size: cover;
				mix-blend-mode: overlay;
				opacity: 0.5;
				animation: glitch 0.5s steps(1, end) both infinite;
			}
		}

		@keyframes glitch {
			0% {
				transform: translate3d(0, 0, 0) scaleX(100%);
			}
			20% {
				transform: translate3d(0, 0, 0) scaleX(200%);
			}
			40% {
				transform: translate3d(0, 0, 0) scaleX(100%);
			}
			60% {
				transform: translate3d(0, 0, 0) scaleX(250%);
			}
			80% {
				transform: translate3d(0, 0, 0) scaleX(150%);
			}
			100% {
				transform: translate3d(0, 0, 0) scaleX(100%);
			}
		}
	}
}
