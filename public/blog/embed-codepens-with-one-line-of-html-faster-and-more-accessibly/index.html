<head>

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <meta name="supported-color-schemes" content="light dark">

    <title>Braden East | Embed codepens with one line of HTML - faster and more accessibly</title>

    <meta property="og:site_name" content="Braden East">
    <meta property="og:locale" content="en_US">
    <meta property="og:type" content="website">
    <meta property="og:url" id="ogurl" content="https://www.bradeneast.com">
    <meta property="og:image" id="ogimage" content="https://www.bradeneast.com/_assets/on-a-rock-small.jpg">

    <link rel="canonical" href="https://www.bradeneast.com">

    <link rel="preload" as="style" href="/_assets/css/main.min.css">
    <link rel="stylesheet" href="/_assets/css/main.min.css" />
    <link href="https://fonts.googleapis.com/css?family=Libre+Baskerville&display=swap" rel="stylesheet">

    <link id="favicon" rel="shortcut icon" href="/_assets/favicon-light.png" type="image/png">
    <meta name="msapplication-TileColor" content="#FFFFFF">
    <meta name="msapplication-TileImage" content="/_assets/favicon-light--padded.png">
    <link rel="apple-touch-icon-precomposed" href="/_assets/favicon-light--padded.png">

    <script defer src="https://polyfill.io/v3/polyfill.min.js" type="text/javascript" crossorigin="anonymous"></script>
    <script defer src="/_assets/js/main.min.js"></script>
    <script>
        var dmName = 'dark_mode';
        var dm = localStorage.getItem(dmName);

        if (dm == null) {
            localStorage.setItem(dmName, false);
        } else {
            document.documentElement.classList.toggle(dmName, JSON.parse(dm));
        }
    </script>

</head>

<body>

    <link rel="prefetch" href="/">
<link rel="prefetch" href="/blog">
<link rel="prefetch" href="/design">

<nav>
    <a href="/">About</a>
    <a href="/blog">Blog</a>
    <a href="/design">Design</a>
</nav>

    <main>
        <link rel="preload" href="https://static.codepen.io/assets/embed/ei.js">
<link rel="preload" href="/_assets/js/prism.js">
<link rel="prefetch" href="undefined">
<link rel="prefetch" href="/blog/get-img-alt-attribute-automatically-from-src">

<link rel="stylesheet" href="/_assets/css/prism.min.css">
<script defer src="/_assets/js/prism.js"></script>
<script async src="https://static.codepen.io/assets/embed/ei.js"></script>

<article>

    <h1 class="title">Embed codepens with one line of HTML - faster and more accessibly</h1>

    <div class="meta">
        <div class="created">
            <strong>Created:</strong> Sat Feb 15 2020
        </div>
        <div class="modified">
            <strong>Modified:</strong> Sat Feb 15 2020</div>
        <div class="categories">
            <strong>Categories:</strong> <a href="/blog/categories/html">html</a>, <a href="/blog/categories/performance">performance</a>, <a href="/blog/categories/accessibility">accessibility</a></div>
    </div>

    <div class="featured-media">
        <img src="/_assets/media/beach-ladder.jpg" alt=""/>
    </div>

    <p>When I write for this blog, I usually embed a <a href="https://codepen.io/">CodePen</a> at the end of the post, as a proof-of-concept of sorts. The problem is, embedded pens are not as friendly and easy to use as most other CodePen features.</p><blockquote>
<p>The puzzle video game <em><a href="https://en.wikipedia.org/wiki/Narbacular_Drop">Narbacular Drop</a></em> was released in 2005. After the game&#39;s release, Valve hired several <em>Narbacular Drop</em> developers to help create <em><a href="https://en.wikipedia.org/wiki/Portal_(video_game)">Portal</a></em>.</p></blockquote><p class="codepen" data-slug-hash="povpQdr">

<p>My biggest complaint is that CodePen embeds feel clunky to use and messy to customize. Here&#39;s the copy-and-paste code they provide by default.</p><pre><code class="language-html">&lt;p class=&quot;codepen&quot; data-height=&quot;265&quot; data-default-tab=&quot;result&quot; data-user=&quot;bradeneast&quot; data-slug-hash=&quot;povpQdr&quot; style=&quot;height: 265px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;&quot; data-pen-title=&quot;Pure CSS 3D Portal Companion Cube&quot;&gt;
  &lt;span&gt;
    See the Pen &lt;a href=&quot;https://codepen.io/bradeneast/pen/povpQdr&quot;&gt;Pure CSS 3D Portal Companion Cube&lt;/a&gt; by Braden (&lt;a href=&quot;https://codepen.io/bradeneast&quot;&gt;@bradeneast&lt;/a&gt;) on &lt;a href=&quot;https://codepen.io&quot;&gt;CodePen&lt;/a&gt;.
  &lt;/span&gt;
&lt;/p&gt;
&lt;script async src=&quot;https://static.codepen.io/assets/embed/ei.js&quot;&gt;&lt;/script&gt;</code></pre><p>We get <code>data</code> attributes all over the place, a myriad of inline styles, and more that&#39;s just plain unnecessary (we&#39;ll get to that). CodePen offers an <code>iframe</code> option, which is slightly cleaner, but gives us even less control over when and how the pen loads.</p><p>This causes a few problems for bloggers/developers wanting to keep their websites clean and performant: </p><ol>
<li>Standardizing pen styles is difficult because the everthing is set inline (you&#39;ll have to use <code>!important</code> to override).</li><li>Customizing the attribution text requires manual edits and manual updates of each copied embed code.</li><li>Only one embed script is necessary to load multiple pens on a page. Directly pasting more than one pen means several duplicate scripts that the browser has to parse and run.</li></ol><h4 id="guessing-the-reasons">Guessing the reasons</h4><p>If you&#39;re anything like me, you&#39;re probably wondering why CodePen chose to include all that extra code.</p><p>This decision isn&#39;t explicitly discussed in their <a href="https://blog.codepen.io/documentation/features/embedded-pens/">documentation</a>, but It&#39;s pretty obvious that most of their reasons were for accessibility. CodePens that encounter a network error will gracefully fall back to a contentful bordered box (see below).</p><p data-height="265" data-default-tab="result" data-user="bradeneast" data-slug-hash="povpQdr" style="height: 265px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;" data-pen-title="Pure CSS 3D Portal Companion Cube">
  <span>
    See the Pen <a href="https://codepen.io/bradeneast/pen/povpQdr">Pure CSS 3D Portal Companion Cube</a> by Braden (<a href="https://codepen.io/bradeneast">@bradeneast</a>) on <a href="https://codepen.io">CodePen</a>.
  </span></p><p>That&#39;s a nice feature, but <a href="https://www.matuzo.at/blog/improving-the-keyboard-accessibility-of-codepen-embeds/">some have pointed out</a> that CodePen embeds still have room to grow when it comes to accessibility. This post focuses on how we can improve our own experience significantly without compromising that of our readers.</p><h4 id="my-solution">My solution</h4><p>Believe it or not, the only absolutely necessary part of a CodePen embed is the <code>data-slug-hash</code> attribute, so we can technically whittle the whole thing down to one line of HTML.</p><pre><code class="language-html">&lt;p class=&quot;codepen&quot; data-slug-hash=&quot;povpQdr&quot;&gt;&lt;/p&gt;</code></pre><p>We can get away with this if we include the <a href="https://static.codepen.io/assets/embed/ei.js">CodePen embed script</a> (~5kb) on every page. However, we pay the price with an empty space when Javascript is blocked or CodePen is <strong><em>gasp</em></strong> DOWN. To rememdy that, let&#39;s use a small bit Javascript that will add a fallback for us dynamically.</p><pre><code class="language-javascript">document.querySelectorAll(&quot;.codepen&quot;).forEach(pen =&gt; {

    const codePen = &quot;https://codepen.io/&quot;;
    const hash = pen.getAttribute(&quot;data-slug-hash&quot;);
    const user = pen.getAttribute(&quot;data-user&quot;);
    const fallback = document.createElement(&#39;p&#39;);

    if (hash) fallback.innerHTML += `View &lt;a href=&quot;${codePen}pen/${hash}&quot;&gt;this pen&lt;/a&gt;`;
    if (hash &amp;&amp; user) fallback.innerHTML += ` by &lt;a href=&quot;${codePen + user}&quot;&gt;@${user}&lt;/a&gt;`;

    fallback.classList.add(&#39;codepen-fallback&#39;);
    fallback.innerHTML = hash || user ? fallback.innerHTML + &quot; on CodePen.&quot; : &quot;This pen is unavailable.&quot;;
    pen.insertAdjacentElement(&quot;afterend&quot;, fallback);

})</code></pre><p>Now we can see a link to the pen regardless of its status. If something goes wrong, our fallback text will indicate what was supposed to happen. To really put a bow on this solution, we can even add a placeholder to the <code>.codepen</code> element for <a href="/blog/using-noscript">noscript situations</a>.</p><pre><code class="language-css">.codepen::after {
    content: &quot;Whoops! This pen is unavailable.&quot;;
    display: block;
    font-style: italic;
    text-align: center;
    padding: 2em;
    border: 2px solid currentColor;
}</code></pre><p>This works because the CodePen embed script replaces the original <code>.codepen</code> element with an <code>iframe</code>. If all scripts are blocked, the element remains and shows our message.</p><p>Now you can enjoy writing one-line CodePen embeds that are fully customizable and easy to maintain!</p></p>

    <p id="blog_cta">
    Thanks for being a reader! If you like this, contribute to the community and <a target="_blank" href="https://twitter.com/share?text=This%20was%20a%20great%20read!&url=https://bradeneast.com/blog/embed-codepens-with-one-line-of-html-faster-and-more-accessibly">share it</a> with your followers.
</p>
</article>

<div class="scope-nav">
    <a href="undefined">
        <span class="label">Previous</span>
        <p class="name">undefined</p>
    </a>
    <a href="/blog/get-img-alt-attribute-automatically-from-src">
        <span class="label">Next</span>
        <p class="name">Get img alt attribute automatically from src</p>
    </a>
</div>
    </main>

    <div id="pre_footer">

    <div id="contact">

    <h3>Let's work together!</h3>

    <p>
        If you're working on a creative project, please reach out. I'd love to collaborate and contribute.
    </p>

    <a class="button" href="mailto:bradeneastdesign@gmail.com">Say Hi 👋</a>

</div>

    <button id="dark_mode_toggle" aria-label="toggle dark mode">
    <svg viewBox="0 0 72 72">
        <path fill="currentColor" d="M61.9,37.61A25.9,25.9,0,1,1,36,11.71,25.9,25.9,0,0,1,61.9,37.61ZM36,1.61a3.58,3.58,0,1,0,3.58,3.57A3.58,3.58,0,0,0,36,1.61ZM7.85,15.16a3.58,3.58,0,1,0,5-.57A3.59,3.59,0,0,0,7.85,15.16ZM.9,45.62a3.58,3.58,0,1,0,2.69-4.29A3.59,3.59,0,0,0,.9,45.62ZM20.38,70a3.58,3.58,0,1,0-1.67-4.78A3.58,3.58,0,0,0,20.38,70Zm31.24,0a3.58,3.58,0,1,0-4.78-1.67A3.58,3.58,0,0,0,51.62,70ZM71.1,45.62a3.58,3.58,0,1,0-4.29,2.69A3.58,3.58,0,0,0,71.1,45.62ZM64.15,15.16a3.58,3.58,0,1,0-.57,5A3.59,3.59,0,0,0,64.15,15.16Z" />
    </svg>
    <svg viewBox="0 0 72 72">
        <path fill="currentColor" d="M55.6,35.84A28.95,28.95,0,0,1,6.3,56.44a28.48,28.48,0,0,0,4.26.32,29,29,0,0,0,28.95-29A28.85,28.85,0,0,0,30.9,7.2,29,29,0,0,1,55.6,35.84Zm2-18.58a3.89,3.89,0,0,0,2.94.39,3.87,3.87,0,1,0-2.94-.39Z" />
    </svg>
</button>

    <button class="unstyled" id="back_to_top" aria-label="back to top of page" onclick="window.scrollTo(0,0)" onkeypress="window.scrollTo(0,0)">
        back to top 🚀
    </button>

</div>

    <footer>

    &copy; 2020 Braden East

    <div id="socials">
    <a href="https://codepen.io/bradeneast" aria-label="braden east on codepen">
        <svg aria-hidden="true" focusable="false" data-icon="behance-square" class="svg-inline--fa fa-behance-square fa-w-14" role="img" viewBox="0 0 512 512">
            <path fill="currentColor" d="M502.285 159.704l-234-156c-7.987-4.915-16.511-4.96-24.571 0l-234 156C3.714 163.703 0 170.847 0 177.989v155.999c0 7.143 3.714 14.286 9.715 18.286l234 156.022c7.987 4.915 16.511 4.96 24.571 0l234-156.022c6-3.999 9.715-11.143 9.715-18.286V177.989c-.001-7.142-3.715-14.286-9.716-18.285zM278 63.131l172.286 114.858-76.857 51.429L278 165.703V63.131zm-44 0v102.572l-95.429 63.715-76.857-51.429L234 63.131zM44 219.132l55.143 36.857L44 292.846v-73.714zm190 229.715L61.714 333.989l76.857-51.429L234 346.275v102.572zm22-140.858l-77.715-52 77.715-52 77.715 52-77.715 52zm22 140.858V346.275l95.429-63.715 76.857 51.429L278 448.847zm190-156.001l-55.143-36.857L468 219.132v73.714z">
            </path>
        </svg>
    </a>
    <a href="https://www.instagram.com/bradeneastdesign" aria-label="braden east on instagram">
        <svg aria-hidden="true" focusable="false" data-icon="instagram" class="svg-inline--fa fa-instagram fa-w-14" role="img" viewBox="0 0 448 512">
            <path fill="currentColor" d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z">
            </path>
        </svg>
    </a>
    <a href="https://github.com/bradeneast" aria-label="braden east on github">
        <svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" class="svg-inline--fa fa-github fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512">
            <path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path>
        </svg>
    </a>
    <a href="https://www.twitter.com/bradenthehair/" aria-label="braden east on twitter">
        <svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="twitter" class="svg-inline--fa fa-twitter fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
            <path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path>
        </svg>
    </a>
    <a href="/blog/feed.xml" style="display: none;">
        <svg style="transform: scale(.9);" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="rss" class="svg-inline--fa fa-rss fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
            <path fill="currentColor" d="M128.081 415.959c0 35.369-28.672 64.041-64.041 64.041S0 451.328 0 415.959s28.672-64.041 64.041-64.041 64.04 28.673 64.04 64.041zm175.66 47.25c-8.354-154.6-132.185-278.587-286.95-286.95C7.656 175.765 0 183.105 0 192.253v48.069c0 8.415 6.49 15.472 14.887 16.018 111.832 7.284 201.473 96.702 208.772 208.772.547 8.397 7.604 14.887 16.018 14.887h48.069c9.149.001 16.489-7.655 15.995-16.79zm144.249.288C439.596 229.677 251.465 40.445 16.503 32.01 7.473 31.686 0 38.981 0 48.016v48.068c0 8.625 6.835 15.645 15.453 15.999 191.179 7.839 344.627 161.316 352.465 352.465.353 8.618 7.373 15.453 15.999 15.453h48.068c9.034-.001 16.329-7.474 16.005-16.504z"></path>
        </svg>
    </a>
</div>

</footer>
</body>