function checkActiveLinks(){const e=Array.from(document.querySelectorAll(".nav-item"));e.map(e=>{let t=e.innerHTML.split("<svg")[0];getURL().toUpperCase().includes(t.toUpperCase())?e.classList.add("active"):e.classList.remove("active")}),e.map(e=>{e.addEventListener("click",function(){setTimeout(checkActiveLinks,100)})})}function toggleDarkMode(){JSON.parse(localStorage.getItem("darkModeOn"))?localStorage.setItem("darkModeOn",!1):localStorage.setItem("darkModeOn",!0),document.body.classList.toggle("dm"),console.log("logged")}function checkDarkMode(e){JSON.parse(localStorage.getItem("darkModeOn"))&&document.body.classList.toggle("dm");let t=0;document.addEventListener("keydown",function(o){e.indexOf(o.key)<0||o.key!==e[t]?t=0:(t++,e.length===t&&toggleDarkMode())})}function fetchBloggerData({blogID:e}){let t="AIzaSyAIvo41apphAFmT6AzIDQfpWG3wzM1fvp8",o=null;return e&&(o=fetch(`https://www.googleapis.com/blogger/v3/blogs/${e}/posts?key=${t}`).then(e=>e.json())),o}function fetchLocalData({filePath:e}){let t=null;return e&&(t=fetch(e).then(t=>{let o=e.split(".").pop();return"json"==o?t.json():t.text()})),t}function capitalize(e){var t=e.split(" "),o=[];return t.map(e=>{o.push(e.charAt(0).toUpperCase()+e.slice(1))}),o.join().replace(/,/g," ")}function altFromSource(e){let t=e.getAttribute("src");return decodeURIComponent(t).split("/").pop().split(".").shift().replace(/-|\+/g," ")}function clearImageFormatting(){const e="style, width, height, max-width, max-height".split(", ");document.querySelectorAll("img").forEach(t=>{e.map(e=>t.removeAttribute(e)),t.setAttribute("loading","lazy"),!t.getAttribute("alt")&&t.setAttribute("alt",altFromSource(t))})}function linkify(e){return e.replace(/ /g,"-").replace(/[^A-Za-z0-9]/g,"").toLowerCase()}function removeLoadingAnimations({from:e}){e.querySelectorAll(".loading").forEach(e=>e.remove())}function removeEmpty(e){return e.filter(e=>""!=e)}function hideTargetedElement({fromParent:e}){let t=window.location.hash.replace("#","");[...e.children].map(e=>e.id==t?e.classList.add("hidden"):e.classList.remove("hidden"))}function getURL(){return window.location.href}function parseBloggerJSON({objectKey:e,objectValue:t,template:o}){let n=o.querySelector(`.${e}`),r=o.querySelectorAll("a"),a=o.querySelector(".image"),i=new DOMParser;if("content"==e){let e=i.parseFromString(t,"text/html"),o=e.querySelector("img");o&&a&&(clearImageFormatting(o),o.setAttribute("alt",altFromSource(o)),a.appendChild(o)),r&&r.forEach(e=>e.setAttribute("href",`/work/#${linkify(t.split(" ").shift())}`))}"title"==e&&r&&r.forEach(e=>e.setAttribute("aria-label",t.replace(/&shy;/g,""))),n&&(Array.isArray(t)?n.innerHTML=t.join(", "):n.innerHTML=t)}function getProjects(){const e="3486337941773520193",t=document.querySelectorAll("[data-projects]");t.forEach(t=>{const o=t.getAttribute("data-projects");"feed"==o&&(window.addEventListener("hashchange",()=>""!=window.location.hash?hideTargetedElement({fromParent:t}):null),fetchBloggerData({blogID:e}).then(e=>{e.items.map(e=>{let o=linkify(e.content.split(" ").shift()),n=document.importNode(t.querySelector("template"),!0).content;Object.keys(e).map(t=>parseBloggerJSON({objectKey:t,objectValue:e[t],template:n})),n.firstElementChild.id=o,t.appendChild(n),clearImageFormatting()}),hideTargetedElement({fromParent:t}),removeLoadingAnimations({from:t})})),"single"==o&&fetchBloggerData({blogID:e}).then(e=>{let o=window.location.hash.replace("#","");e.items.map(e=>{o==linkify(e.content.split(" ").shift())&&(console.log(e),Object.keys(e).map(o=>parseBloggerJSON({objectKey:o,objectValue:e[o],template:t})))}),clearImageFormatting(),removeLoadingAnimations({from:t}),window.addEventListener("hashchange",function(o){window.scrollTo(0,0),e.items.map(e=>{o.newURL.split("#").pop()==linkify(e.content.split(" ").shift())&&Object.keys(e).map(o=>parseBloggerJSON({objectKey:o,objectValue:e[o],template:t}))}),clearImageFormatting()})})})}function initScrollAnimations(){function e({element:e,className:t,threshold:o}){let n=Math.round(window.scrollY);n>o?e.classList.add(t):e.classList.remove(t)}function t(){let e=window.scrollY;a!==e?(a=e,o(),r(t)):r(t)}function o(){e({element:nav,className:"compact",threshold:600}),e({element:n,className:"up",threshold:600})}const n=document.getElementById("up-down");let r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame,a=window.scrollY;r&&t()}const konami=["ArrowUp","ArrowUp","ArrowDown","ArrowDown","ArrowLeft","ArrowRight","ArrowLeft","ArrowRight","b","a"];checkActiveLinks(),checkDarkMode(konami),initScrollAnimations(),getProjects();